\definecolor{keywordcolor}{RGB}{0,0,153}
\definecolor{numbers}{gray}{0.1}
\definecolor{vlgray}{gray}{0.9}
\definecolor{lgray}{gray}{0.2}
%\newcounter{definitioncounter}


\lstset{
	basicstyle=\ttfamily,
	keywordstyle={\color{keywordcolor}\bfseries},
	ndkeywordstyle={\color{BurntOrange}},
	stringstyle={\color{ForestGreen}\ttfamily\textit},
	identifierstyle=\color{black},
	commentstyle={\color{gray}\ttfamily},
	emphstyle={\color{OrangeRed}},
%	numbers=left,
%	numberstyle=\tiny\bfseries\color{numbers},
	showstringspaces = false,	
%	stepnumber = 2,
	breaklines,
}

\lstdefinelanguage{Kotlin}{
	comment=[l]{//},
	emph={filter, first, firstOrNull, forEach, lazy, map, mapNotNull, println},
	keywords={!in, !is, abstract, actual, annotation, as, as?, break, by, catch, class, companion, const, constructor, continue, crossinline, data, delegate, do, dynamic, else, enum, expect, external, false, field, file, final, finally, for, fun, get, if, import, in, infix, init, inline, inner, interface, internal, is, lateinit, noinline, null, object, open, operator, out, override, package, param, private, property, protected, public, receiveris, reified, return, return@, sealed, set, setparam, super, suspend, tailrec, this, throw, true, try, typealias, typeof, val, var, vararg, when, where, while},
	morecomment=[s]{/*}{*/},
	morestring=[b]",
	morestring=[s]{"""*}{*"""},
	ndkeywords={@Deprecated, @JvmField, @JvmName, @JvmOverloads, @JvmStatic, @JvmSynthetic, Array, Byte, Double, Float, Int, Integer, Iterable, Long, Runnable, Short, String, Any, Unit, Nothing},
	sensitive=true,
}


\newtcbinputlisting{\Kotlin}[4][]{%
%	step=definitioncounter,
%	frame style={upper left=vlgray, lower right=lgray},
	left=6mm,
	listing file={code/Kotlin/#2},
	colback = vlgray,
	colframe = vlgray,
	enlarge top by=0mm, top=-2mm, bottom=2mm, 
	enhanced,
	after={\par\vspace{0.5\baselineskip}\noindent},
%	overlay={\node[
%		draw,
%		fill= lgray,
%		yshift=4pt,
%		xshift=-25pt,
%		left,
%		text=white,
%		anchor=east,
%		font=\footnotesize\bfseries,
%%		rounded corners,
%		] at (frame.south east)
%		{#2};
%	},
	listing only,
	listing options={
		language = Kotlin,
		columns = fullflexible,
		firstnumber = {#3},
		firstline ={#3},
		lastline = {#4},
	},
	breakable,
%	sharp corners = southeast,
	#1
}

\newtcbinputlisting{\CPP}[4][]{%
%	width=0.8\textwidth,
%	step=definitioncounter,
	left=6mm,
	frame style={upper left=vlgray, lower right=lgray},
	center,
	listing file={code/C++/#2},
	colback = vlgray,
	colframe = vlgray,
	enlarge top by=0mm, top=-2mm, bottom=2mm, 
	enhanced,
	listing only,
	after={\par\vspace{0.5\baselineskip}\noindent},
	overlay={\node[
		draw,
		fill= lgray,
		yshift=4pt,
		xshift=-25pt,
		left,
		text=white,
		anchor=east,
		font=\footnotesize\bfseries,
		%		rounded corners,
		] at (frame.south east)
		{#2};
	},
	listing options={
		language = C++,
		columns = fullflexible,
		firstnumber = {#3},
		firstline ={#3},
		lastline = {#4},
%		multicols=2,
	},
	breakable,
%	sharp corners = southeast,
	#1
}